<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Metsuda Hub</title>

	<!-- Подключенные CSS -->
	<link href="css/bootstrap.grid.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/bootstrap.modal.min.css">
	<link rel="stylesheet" href="css/cropper.min.css">
	<!-- Конец подключенных CSS -->

	<!-- Компилированный CSS -->
	<link rel="stylesheet" href="css/style.css"/>
	<!-- Конец компилированных CSS -->

</head>
<body>
	<header class="header">
		<div class="header-overlay"></div>
		<div class="container">
			<div id="burger-button" class="burger-menu-button mobile_show"></div>
			<div class="col-sm-2 col-xs-6">
				<a href="index.html">
					<img src="img/logo.svg" alt="Methuda Hub - Каталог краудфандинговых проектов">
				</a>
			</div>
			<div class="col-sm-10 col-xs-6">
				<div id="burger-menu" class="col-sm-8 burger-menu">
					<nav class="header-nav">
						<ul>
							<li>
								<a class="active" href="index.html">Главная</a>
							</li>
							<li>
								<a href="about.html">О площадке</a>
							</li>
							<li>
								<a href="catalog.html">Проекты</a>
							</li>
							<li>
								<a href="authors.html">Авторы</a>
							</li>
							<li>
								<a href="rules.html">Создать проект</a>
							</li>
							<li>
								<a href="news.html">Новости</a>
							</li>
							<li class="mobile_show">
								<a href="cabinet.html">Личный кабинет</a>
							</li>
						</ul>
					</nav>
				</div>
				<div class="col-sm-3 mobile_hide">
					<div class="header-search">
						<div class="header-search-wrapper">
							<input type="text" placeholder="Поиск по проектам">
						</div>
						<input type="submit" value="">
					</div>
				</div>
				<div class="col-sm-1 mobile_hide">
					<div class="header-logined">
						<a href="#"><img src="img/authors/avatar.jpg" alt=""></a>
					</div>
					<div class="header-logined-dropdown">
						<a href="cabinet.html">Моя страница</a>
					</div>
				</div>
			</div>
		</div>
	</header>
<div class="secondarynav mobile_hide">
	<div class="container">
		<div class="col-sm-8 mobile_hide">
			<div class="secondarynav-left">
				<a href="index.html">Главная</a>
				<a href="catalog.html">Каталог проектов</a></div>
		</div>
		<div class="col-sm-4 col-xs-12">
			<div class="secondarynav-right">
				<ul>
					<li><a href="#"><img src="img/svg/vk_purple.svg" alt="Мы - Вконтакте"></a></li>
					<li><a href="#"><img src="img/svg/fb_purple.svg" alt="Мы - в Facebook"></a></li>
				</ul>
			</div>
		</div>
	</div>
</div>

<div class="cabinet">
	<div class="container">
		<div class="cabinet-tabs">
			<div class="cabinet-tab cabinet-tab_left cabinet-tab_active">
				<a href="#cabinet-profile">Мой профиль</a>
			</div>
			<div class="cabinet-tab cabinet-tab_right">
				<a href="#cabinet-projects">Мои проекты</a>
			</div>
		</div>
		<div class="row">
			<div id="cabinet-profile" class="cabinet-profile cabinet-wrappers">
				<div class="col-sm-3 col-xs-12">
					<div class="cabinet-avatar">
						<img id="cabinet-avatar-preview" src="img/cabinet/avatar_standart.svg" alt=".">
						<input type="file" id="user-cabinet-avatar" accept="image/jpeg,image/png,image/gif">
						<label for="user-cabinet-avatar" class="button button_purple" href="#">Обновить фото</label>
					</div>
				</div>
				<div class="col-sm-6 col-xs-12">
					<div class="cabinet-info">
						<h3>Кирилёнок Владислав Сергеевич</h3>
						<form id="form-profile" action="#">
						<ul>
							<li>Email: <input name="email" type="text" value="bkirilenok@gmail.com" readonly></li>
							<li>Телефон: <input name="phone" type="tel" value="+375447962129" readonly></li>
							<li>Город: 
								<select name="city" type="text" disabled>
									<option value="1">Москва</option>
									<option value="1">Москва</option>
									<option value="1">Москва</option>
									<option value="1">Москва</option>
								</select>
							</li>
							<li>Сайт: <input name="web" type="text" value="http://webminsk.by" readonly></li>
							<li class="cabinet-socials">
								Социальные сети:
								<span><img src="img/svg/vk_purple.svg" alt="."> Владислав Кирилёнок</span>
								<span><img src="img/svg/fb_purple.svg" alt="."> wmaileq</span>
							</li>
							<li><span>О себе:</span> <textarea readonly>Далеко-далеко за словесными горами в стране, гласных и согласных живут рыбные тексты.</textarea></li>
							<li><span>Чем я могу помочь:</span> <textarea readonly>Далеко-далеко за словесными горами в стране, гласных и согласных живут рыбные тексты.</textarea></li>
							<li><a href="#">Автор 3 проектов</a></li>
						</ul>
						<input id="form-profile-save" class="button button_purple" type="hidden" value="Сохранить">
						</form>
					</div>
				</div>
				<div class="col-sm-3 col-xs-12">
					<div class="cabinet-edit">
						<a id="editButton" class="button button_purple" href="#">Редактировать профиль</a>
					</div>
				</div>
			</div>
			<div id="cabinet-projects" class="cabinet-projects cabinet-wrappers cabinet-hide">
				<a href="new.html" class="button button_purple cabinet-new-project">Создать новый</a>
				<div class="col-sm-3 col-xs-12">
					<div class="catalog-card">
						<div class="cabinet-card-overlay">
							<div class="cabinet-card-overlay-wrapper">
								<a class="button button_white" href="project.html">Перейти к проекту</a>
								<a class="button button_white cabinet-edit_project" href="#">Редактировать</a>
								<a class="button button_white cabinet-edit_news" href="#">Новости</a>
								<a class="button button_white cabinet-edit_sponsors" href="#">Спонсоры</a>
							</div>
						</div>
						<a href="project.html">
							<img src="img/catalog/project.jpg" alt="">
							<h3>Название стартапа в две строки максимум</h3>
						</a>
						<div class="catalog-author">Автор: <a href="#">Владислав Кирилёнок</a></div>
						<p>Краткое описание проекта (должно обрезаться, если введено слишком много текста Далеко-далеко за словесными горами в стране, гласных и согласных живут рыбные тексты.</p>
						<a href="#" class="catalog-geo">
							<span>Санкт-Петербург, Россия</span>
						</a>
						<div class="catalog-progress">
							<div class="catalog-status catalog-status_open">
								Статус проекта: <span>Открыт</span>
							</div>
							<div class="catalog-money">
								<span>Бюджет:</span>18.000	
							</div>
						</div>
						<div class="catalog-dates">
							<div class="catalog-dates-start">
								<span>Начало:</span> 10 Декабря 2017
							</div>
							<div class="catalog-dates-end">
								<span>Конец:</span> 18 Декабря 2017
							</div>
						</div>
					</div>
				</div>
				<div class="col-sm-3 col-xs-12">
					<div class="catalog-card">
						<div class="cabinet-card-overlay">
							<div class="cabinet-card-overlay-wrapper">
								<a class="button button_white" href="project.html">Перейти к проекту</a>
								<a class="button button_white cabinet-edit_project" href="#">Редактировать</a>
								<a class="button button_white cabinet-edit_news" href="#">Новости</a>
								<a class="button button_white cabinet-edit_sponsors" href="#">Спонсоры</a>
							</div>
						</div>
						<a href="project.html">
							<img src="img/catalog/project.jpg" alt="">
							<h3>Название стартапа в две строки максимум</h3>
						</a>
						<div class="catalog-author">Автор: <a href="#">Владислав Кирилёнок</a></div>
						<p>Краткое описание проекта (должно обрезаться, если введено слишком много текста Далеко-далеко за словесными горами в стране, гласных и согласных живут рыбные тексты.</p>
						<a href="#" class="catalog-geo">
							<span>Санкт-Петербург, Россия</span>
						</a>
						<div class="catalog-progress">
							<div class="catalog-status catalog-status_open">
								Статус проекта: <span>Открыт</span>
							</div>
							<div class="catalog-money">
								<span>Бюджет:</span>18.000	
							</div>
						</div>
						<div class="catalog-dates">
							<div class="catalog-dates-start">
								<span>Начало:</span> 10 Декабря 2017
							</div>
							<div class="catalog-dates-end">
								<span>Конец:</span> 18 Декабря 2017
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="cabinet-edit" class="cabinet-wrappers cabinet-hide">
			</div>
		</div>
	</div>
</div>
<div id="loading">
	<img src="img/svg/loading.svg" alt="">
</div>

<div id="modal-cropper" class="modal modal-cropper fade">
  <div class="modal-dialog">
    <div class="modal-content">
        <button type="button" class="close" data-dismiss="modal">
        	<span>&times;</span>
        </button>
        <h3>Обрезать изображение</h3>
        <p>Выбранная область будет показываться на Вашей странице автора</p>
        <div class="cropper-main-wrapper">
        	<img id="cropper-image" src="img/authors/avatar.jpg" alt="">
        </div>
        <a href="#" id="cropper-save-image" class="button button_purple">Сохранить изображение</a>
    </div>
  </div>
</div>
<footer class="footer">
	<div class="footer-overlay"></div>
	<div class="container">
		<div class="row">
			© MetsudaHub 2017
		</div>
	</div>
</footer>

<!-- Начало скиптов -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="js/bootstrap.modal.min.js"></script>
	<script src="js/cropper.min.js"></script>
	<script>
		$('#user-cabinet-avatar').on('change', function(event){
			var loading = $('#loading');
			var input = event.target;
			var reader = new FileReader();
			reader.onloadstart = function() {
				loading.show();
		    };
		    reader.onloadend = function() {
				loading.hide();
		    };
		    reader.onload = function(){
				var dataURL = reader.result;
				$('#modal-cropper').modal('show');
				$('#cropper-image').attr('src', dataURL);
				$('#cropper-image').cropper({
					viewMode: 2,
					dragMode: 'move',
					aspectRatio: 65 / 54,
					background: false,
					autoCropArea: 1,
					movable: false,
					scalebale: false,
					rotatable: false,
					zoomOnWheel: false
				});
		    };
		    reader.readAsDataURL(input.files[0]);
		});
		$('#cropper-save-image').click(function(e){
			e.preventDefault();
			$('#cropper-image').cropper('getCroppedCanvas').toBlob(function(blob){
				var formData = new FormData();
				formData.append('croppedImage', blob);
				xhr = new XMLHttpRequest();
				xhr.open('POST', '/cabinet/avatar_preview', true);
				xhr.onload = function(){
					if (xhr.status == 200) {
						$('#modal-cropper').modal('hide');
						$('#cabinet-avatar-preview').attr('src', xhr.responseText);
						$('#form-profile-save').attr('type', 'submit');
					};
				xhr.send(formData);
				};
			});
		});
	</script>
	<script>
		$('.cabinet-tab').click(function(){
			$('.cabinet-wrappers').addClass('cabinet-hide');
			$('.cabinet-tab').removeClass('cabinet-tab_active');
			$(this).addClass('cabinet-tab_active');
			$($(this).children('a').attr('href')).removeClass('cabinet-hide');
		})
		$('#editButton').click(function(){
			$('#form-profile input').removeAttr('readonly');
			$('#form-profile textarea').removeAttr('readonly');
			$('#form-profile select').removeAttr('disabled');
			$('#form-profile-save').attr('type', 'submit');
			return false;
		})
	</script>
	<script>
		$('.cabinet-edit_project').click(function(){
			$('.cabinet-wrappers').addClass('cabinet-hide');
			$('#cabinet-edit').removeClass('cabinet-hide');
			$('#loading').show();
			$.ajax({
				url: 'edit-project.html',
				cache: false,
				success: function(html){
					$('#cabinet-edit').html(html);
					$('#loading').hide();
				},
				error: function(){
					$('#loading').hide();
					alert('Ошибка загрузки редактирования проекта');
					$('.cabinet-wrappers').addClass('cabinet-hide');
					$('#cabinet-projects').removeClass('cabinet-hide');
				}
			})
		});
		$('.cabinet-edit_news').click(function(){
			$('.cabinet-wrappers').addClass('cabinet-hide');
			$('#cabinet-edit').removeClass('cabinet-hide');
			$('#loading').show();
			$.ajax({
				url: 'edit-news.html',
				cache: false,
				success: function(html){
					$('#cabinet-edit').html(html);
					$('#loading').hide();
				},
				error: function(){
					$('#loading').hide();
					alert('Ошибка загрузки редактирования новостей');
					$('.cabinet-wrappers').addClass('cabinet-hide');
					$('#cabinet-projects').removeClass('cabinet-hide');
				}
			})
		});
		$('.cabinet-edit_sponsors').click(function(){
			$('.cabinet-wrappers').addClass('cabinet-hide');
			$('#cabinet-edit').removeClass('cabinet-hide');
			$('#loading').show();
			$.ajax({
				url: 'edit-sponsors.html',
				cache: false,
				success: function(html){
					$('#cabinet-edit').html(html);
					$('#loading').hide();
				},
				error: function(){
					$('#loading').hide();
					alert('Ошибка загрузки редактирования спонсоров');
					$('.cabinet-wrappers').addClass('cabinet-hide');
					$('#cabinet-projects').removeClass('cabinet-hide');
				}
			})
		});
	</script>
	<script>
		$('.header-logined a').click(function(){
			$('.header-logined-dropdown').toggle();
			return false;
		})
	</script>
<!-- Конец скриптов -->

</body>
</html>